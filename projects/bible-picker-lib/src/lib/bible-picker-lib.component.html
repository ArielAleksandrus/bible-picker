<div class="bible-picker">
  <div class="picker-card">
    <header class="picker-header">
      <h3 class="picker-title">
        {{title}}
      </h3>
    </header>

    <main class="picker-content">
      <div class="grid-container">
        <!-- Livros -->
        @if (stage === 'book') {
          @for (book of bible().books; track book; let i = $index) {
            <div
              class="grid-item book-item"
              [class.selected-start]="book === selectedBookStart"
              [class.selected-range]="i > selectedBookStartIdx && i <= hoveredBook"
              [style]="customCSS()['b'][i]"
              (click)="selectBook(book)"
              (mouseenter)="hoverBook(i)"
            >
              {{ book.abbrev }}
            </div>
          }
        }

        <!-- Capítulos -->
        @if (stage === 'chapter' && selectedBookStart) {
          @for (chapter of selectedBookStart.chapters; track $index; let i = $index) {
            <div
              class="grid-item chapter-item"
              [class.selected-start]="i === (selectedChapterStart || 0) - 1"
              [class.selected-range]="i > (selectedChapterStart || 999) - 1 && i <= hoveredChapter"
              [style]="customCSS()['c'][i]"
              (click)="selectChapter(i + 1)"
              (mouseenter)="hoverChapter(i)"
            >
              {{ i + 1 }}
            </div>
          }
        }

        <!-- Versículos -->
        @if (stage === 'verse' && selectedBookStart && selectedChapterStart) {
          @for (verse of selectedBookStart.chapters[selectedChapterStart - 1]; track $index; let i = $index) {
            <div
              class="grid-item verse-item"
              [class.selected-start]="i === (selectedVerseStart || 0) - 1"
              [class.selected-range]="i > (selectedVerseStart || 999) - 1 && i <= hoveredVerse"
              [style]="customCSS()['v'][i]"
              (click)="selectVerse(i + 1)"
              (mouseenter)="hoverVerse(i)"
            >
              {{ i + 1 }}
            </div>
          }
        }
      </div>
    </main>

    <footer class="picker-footer">
      <hr />
      <div class="actions">
        @if (stage !== 'book') {
          <button class="btn btn-secondary" (click)="goBack()">
            ←
          </button>
        }

        @if (ready) {
          <button
            class="btn btn-primary"
            [disabled]="disable"
            (click)="send(true)"
          >
            OK
          </button>
        }

      </div>
    </footer>
  </div>
</div>
